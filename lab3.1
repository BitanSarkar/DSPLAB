
float x[100] = {-87.17307638,-109.5495333,11.00037444,163.4286511,199.1497693,123.5660003,56.25558579,11.87495703,-18.97729813,-42.98507139,-49.50432452,-44.95819516,-33.93206642,-28.58275615,-31.58109989,-41.0802992,-54.49307368,-68.26273259,-80.63560247,-89.53265601,-97.96825536,-104.8688265,-109.0354357,-55.42792547,102.4289065,215.9352907,173.6592794,95.27713062,38.69934301,2.586699113,-27.11808597,-41.50592056,-38.88116345,-27.52106187,-19.43972127,-21.31888102,-29.19861314,-42.08703327,-57.83191118,-69.53303635,-80.46281953,-88.35226795,-94.97094082,-102.2065852,-97.71319214,4.172319927,174.7275931,221.5697151,147.842936,75.61863429,28.48903346,-4.64088307,-29.76995187,-35.85962812,-27.26819387,-12.26373734,-5.602559446,-9.189517172,-21.48116953,-38.07938735,-52.01784737,-63.35879895,-71.93471855,-79.04261272,-85.4265121,-86.88364206,-9.984335526,167.9810654,251.6113399,182.1367896,108.0062751,59.54909365,24.89964724,-5.472668004,-17.77934267};
float y[75],dft_real[75][75], dft_comp[75][75];
float x_real[75],x_imag[75],X[75];
int N = 75;
int k,n;
int L=8;

void setup() {
  Serial.begin(9600);
}

void loop() {

  for (int i=0 ; i<N ; i++)
  {
    for (int j=i; j<i+L && j<N ; j++){
      y[i] = y[i] + x[j];
    }
    y[i] = y[i]/L;
      Serial.println(y[i]);
  }
  
 for ( k=0;k<=N-1;k++){
  for ( n=0;n<=N-1;n++){
    dft_real[k][n] = cos( (2*PI*k*n)/float(N)); 
    dft_comp[k][n] = -1*sin( (2*PI*k*n)/float(N));
  } 
 }

   float s_real,s_imag,angle;
  
  for ( k=0;k<=N-1;k++){
  s_real=0.0;s_imag=0.0;
   for ( n=0;n<=N-1;n++){
    angle = (2*PI*k*n)/float(N);
    s_real +=  y[n] * dft_real[k][n] ;
    s_imag +=  y[n] * dft_comp[k][n] ;
  }
    x_real[k] = s_real;
    x_imag[k] = s_imag;
    X[k] = sqrt(x_real[k]*x_real[k] + x_imag[k]*x_imag[k]);
    }

    //for(int i=0;i<N;i++){
    //  Serial.println(X[i]);
   // }
    float maxval=0, maxloc=0;
    for(int i=0;i<N;i++){
        if(X[i]>maxval){
            maxval=X[i];
            maxloc=i;
          }
      }
    float freq = (maxloc/3);
    float pulserate = 60/freq;
    Serial.println(pulserate);

}
